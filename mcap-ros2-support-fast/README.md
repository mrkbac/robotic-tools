# Python MCAP ROS2 support fast

This package provides fast ROS2 support for the Python MCAP file format reader.
It has no dependencies on ROS2 itself or a ROS2 environment, and can be used in any Python project.

## Benchmarks

Decoder performance (includes automatic endianness detection from CDR header):

```txt
------------------------------------------------------------------------------------------- benchmark 'msgs-10': 2 tests ------------------------------------------------------------------------------------------
Name (time in ms)                                  Min                 Max                Mean             StdDev              Median                IQR            Outliers      OPS            Rounds  Iterations
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_benchmark_decoder[mcap_ros2_fast-10]      24.4239 (1.0)       26.9626 (1.0)       25.2518 (1.0)       0.6500 (1.0)       25.1450 (1.0)       0.6882 (1.0)           4;1  39.6012 (1.0)          16           1
test_benchmark_decoder[mcap_ros2-10]          356.9057 (14.61)    397.5086 (14.74)    376.2065 (14.90)    18.8347 (28.98)    374.5450 (14.90)    35.9113 (52.18)         2;0   2.6581 (0.07)          5           1
-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

---------------------------------------------------------------------------------------------- benchmark 'msgs-100': 2 tests -----------------------------------------------------------------------------------------------
Name (time in ms)                                     Min                   Max                  Mean             StdDev                Median                IQR            Outliers      OPS            Rounds  Iterations
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_benchmark_decoder[mcap_ros2_fast-100]        56.0086 (1.0)         63.3696 (1.0)         59.2830 (1.0)       2.8364 (1.0)         57.6640 (1.0)       5.0540 (1.0)           5;0  16.8683 (1.0)          13           1
test_benchmark_decoder[mcap_ros2-100]          1,375.8338 (24.56)    1,437.0455 (22.68)    1,395.6878 (23.54)    24.1903 (8.53)     1,390.3035 (24.11)    24.6183 (4.87)          1;0   0.7165 (0.04)          5           1
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

---------------------------------------------------------------------------------------------- benchmark 'msgs-1000': 2 tests ----------------------------------------------------------------------------------------------
Name (time in ms)                                      Min                   Max                  Mean             StdDev                Median                IQR            Outliers     OPS            Rounds  Iterations
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
test_benchmark_decoder[mcap_ros2_fast-1000]       150.7844 (1.0)        159.2525 (1.0)        155.4583 (1.0)       3.2333 (1.0)        155.0148 (1.0)       5.2918 (1.0)           3;0  6.4326 (1.0)           6           1
test_benchmark_decoder[mcap_ros2-1000]          4,133.2060 (27.41)    4,210.1760 (26.44)    4,166.5562 (26.80)    34.1829 (10.57)    4,161.5531 (26.85)    61.9340 (11.70)         1;0  0.2400 (0.04)          5           1
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
```

**Summary:** mcap-ros2-support-fast is **15-27x faster** than the reference mcap-ros2 implementation, with performance scaling better for larger message counts.

Based on <https://github.com/foxglove/mcap/tree/main/python> (MIT licensed)
